<%# Copyright 2011-2012 Rice University. Licensed under the Affero General Public 
    License version 3 or later.  See the COPYRIGHT file for details. %>

<% @links = [ link_to('New List', new_list_path), link_to('My Lists', lists_path) ] %>

<%= pageHeading("My Lists") %>

<table class="list" width="100%">
   <tr>
      <th width="30%">Name</th>
      <th width="10%" style="text-align:center">Public</th>
      <th width="10%" style="text-align:center">Drafts</th>
      <th width="20%"></th>
      <th width="15%" style="text-align:center"># Questions</th>
      <th width="15%" style="text-align:center"># Members</th>
      <th></th>
      <th></th>
      <th></th>
   </tr>

   <% @lists.each do |list| %>
      <% member = list.list_members.first %>
     <tr>
       <td><%= link_to list.name, list_path(list) %></td>
       <td style="text-align:center"><%= list.is_public %>
       <td style="text-align:center"><%= list.has_publicly_viewable_drafts %>
       <td style="text-align:center">
         <% if member.is_default %>  
            (DEFAULT)
         <% else %>
            <%= link_to "Make default", 
                        list_member_make_default_path(member),
                        :method => :put %>
         <% end %>
       </td>
       <td style="text-align:center"><%= list.list_questions.size %></td>
       <td style="text-align:center"><%= list.list_members.size %></td>       
       <td><%= link_to show_icon, list %></td>
       <td><%= link_to edit_icon, edit_list_path(list) %></td>
       <td><%= link_to x_icon, list, 
                       :confirm => "Are you sure you want to leave #{list.name}?", 
                       :method => :delete %></td>
     </tr>
   <% end %>
   
</table>

<br />


